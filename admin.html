<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
      content="Painel administrativo do AchaduBom - Gerenciar produtos e ofertas">
    <meta name="robots" content="noindex, nofollow">

    <title>Admin - AchaduBom | Gerenciar Produtos</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml"
      href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgo8c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjojMmU3ZDMyO3N0b3Atb3BhY2l0eToxIiAvPgo8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiMyZWNjNzE7c3RvcC1vcGFjaXR5OjEiIC8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPHJlY3Qgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiByeD0iMTIiIGZpbGw9InVybCgjZ3JhZGllbnQpIi8+Cjx0ZXh0IHg9IjI0IiB5PSIzMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZm9udC13ZWlnaHQ9ImJvbGQiPkE8L3RleHQ+Cjx0ZXh0IHg9IjI0IiB5PSIzOCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iI2ZmOTgwMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjgiPuKchTwvdGV4dD4KPC9zdmc+">

    <!-- CDN Assets -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet">
    <link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&family=Open+Sans:wght@400;500;600&display=swap"
      rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="./assets/css/globals.css">

    <!-- Admin Protection Script -->
    <script src="./assets/js/config.js"></script>
    <script>
            // Prote√ß√£o do painel administrativo
            (function() {
                const checkAdminAccess = () => {
                    if (typeof window.AchaduBomConfig === 'undefined') {
                        redirectToHome('Configura√ß√£o n√£o encontrada.');
                        return;
                    }

                    const config = window.AchaduBomConfig;
                    const adminEnabled = config.admin && config.admin.enabled === true;

                    if (!adminEnabled) {
                        redirectToHome('Painel administrativo desabilitado.');
                        return;
                    }

                    // Se chegou aqui, o admin est√° habilitado
                    if (config.debug && config.debug.showConsoleMessages) {
                        console.log('üîë Acesso ao admin autorizado');
                    }
                };

                const redirectToHome = (message) => {
                    alert('‚ö†Ô∏è ' + message);
                    window.location.href = './index.html';
                };

                // Verificar acesso imediatamente
                checkAdminAccess();
            })();
        </script>

    <style>
    /* Estilos espec√≠ficos do Admin */
    .admin-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
      background: var(--cor-fundo);
      min-height: 100vh;
    }
    
    .admin-header {
      background: white;
      padding: 2rem;
      border-radius: 15px;
      box-shadow: var(--sombra-suave);
      margin-bottom: 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }
    
    .admin-titulo {
      display: flex;
      align-items: center;
      gap: 1rem;
      color: var(--cor-primaria);
      margin: 0;
    }
    
    .admin-acoes {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
    
    .form-section {
      background: white;
      padding: 2rem;
      border-radius: 15px;
      box-shadow: var(--sombra-suave);
      margin-bottom: 2rem;
    }
    
    .form-titulo {
      color: var(--cor-primaria);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .form-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
    }
    
    .form-group label {
      font-weight: 600;
      color: var(--cor-texto);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      padding: 0.75rem;
      border: 2px solid var(--cor-borda);
      border-radius: 8px;
      font-size: 1rem;
      transition: all var(--transicao-media);
      background: white;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      border-color: var(--cor-primaria);
      outline: none;
      box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
    }
    
    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }
    
    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    /* Estilos para o Modal */
    .modal-dialog {
      max-width: 900px;
    }
    
    .modal-header {
      background: var(--gradiente-hero);
      color: white;
      border-bottom: none;
      border-radius: 15px 15px 0 0;
    }
    
    .modal-header .modal-title {
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .modal-header .btn-close {
      filter: invert(1);
    }
    
    .modal-body {
      padding: 2rem;
      max-height: 70vh;
      overflow-y: auto;
    }
    
    .modal-footer {
      background: var(--cor-fundo);
      border-top: 1px solid var(--cor-borda);
      border-radius: 0 0 15px 15px;
      padding: 1.5rem 2rem;
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
    }
    
    .modal-footer .btn-custom {
      margin: 0;
    }
    
    .contador-caracteres {
      margin-top: 0.5rem;
    }
    
    .checkbox-group input[type="checkbox"] {
      width: 20px;
      height: 20px;
      margin: 0;
    }
    
    .form-buttons {
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
      margin-top: 2rem;
      flex-wrap: wrap;
    }
    
    .btn-codigo {
      background: var(--cor-destaque);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all var(--transicao-media);
    }
    
    .btn-codigo:hover {
      background: #e67e22;
    }
    
    .preview-imagens {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
      padding: 1rem;
      background: var(--cor-fundo);
      border-radius: 8px;
    }
    
    .preview-item {
      position: relative;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: var(--sombra-suave);
    }
    
    .preview-item img {
      width: 100%;
      height: 120px;
      object-fit: cover;
    }
    
    .preview-numero {
      position: absolute;
      top: 5px;
      left: 5px;
      background: var(--cor-primaria);
      color: white;
      width: 25px;
      height: 25px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      font-weight: bold;
    }
    
    .preview-erro {
      padding: 1rem;
      text-align: center;
      color: var(--cor-urgente);
      font-size: 0.9rem;
    }
    
    .contador-caracteres {
      font-size: 0.9rem;
      color: var(--cor-texto-claro);
      margin-top: 0.5rem;
    }
    
    .busca-admin {
      position: relative;
      max-width: 400px;
    }
    
    .busca-admin input {
      width: 100%;
      padding: 0.75rem 1rem;
      padding-right: 40px;
      border: 2px solid var(--cor-borda);
      border-radius: 25px;
      background: white;
    }
    
    .busca-admin i {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--cor-texto-claro);
    }
    
    .lista-produtos {
      background: white;
      border-radius: 15px;
      box-shadow: var(--sombra-suave);
      overflow: hidden;
    }
    
    .lista-header {
      background: var(--cor-primaria);
      color: white;
      padding: 1.5rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .lista-stats {
      display: flex;
      gap: 2rem;
      font-size: 0.9rem;
    }
    
    .stat-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .item-produto {
      padding: 1.5rem 2rem;
      border-bottom: 1px solid var(--cor-borda);
      transition: background var(--transicao-media);
    }
    
    .item-produto:hover {
      background: var(--cor-fundo);
    }
    
    .item-produto:last-child {
      border-bottom: none;
    }
    
    .item-produto.inativo {
      opacity: 0.6;
    }
    
    .item-imagem {
      position: relative;
      width: 80px;
      height: 80px;
      border-radius: 8px;
      overflow: hidden;
      flex-shrink: 0;
    }
    
    .item-imagem img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .item-status {
      position: absolute;
      top: 5px;
      right: 5px;
    }
    
    .badge {
      padding: 0.25rem 0.5rem;
      border-radius: 12px;
      font-size: 0.7rem;
      font-weight: 600;
    }
    
    .badge.ativo {
      background: var(--cor-confianca);
      color: white;
    }
    
    .badge.inativo {
      background: var(--cor-texto-claro);
      color: white;
    }
    
    .item-info {
      flex: 1;
      margin-left: 1.5rem;
    }
    
    .item-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 0.5rem;
    }
    
    .item-header h3 {
      margin: 0;
      font-size: 1.1rem;
      color: var(--cor-texto);
    }
    
    .item-acoes {
      display: flex;
      gap: 0.5rem;
    }
    
    .btn-acao {
      width: 35px;
      height: 35px;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      transition: all var(--transicao-media);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .btn-editar {
      background: var(--cor-primaria);
      color: white;
    }
    
    .btn-editar:hover {
      background: var(--cor-confianca);
      transform: scale(1.1);
    }
    
    .btn-duplicar {
      background: var(--cor-destaque);
      color: white;
    }
    
    .btn-duplicar:hover {
      background: #e67e22;
      transform: scale(1.1);
    }
    
    .btn-deletar {
      background: var(--cor-urgente);
      color: white;
    }
    
    .btn-deletar:hover {
      background: #c0392b;
      transform: scale(1.1);
    }
    
    .item-detalhes {
      display: flex;
      gap: 1rem;
      margin-bottom: 0.5rem;
      flex-wrap: wrap;
      font-size: 0.9rem;
    }
    
    .item-detalhes span {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      color: var(--cor-texto-claro);
    }
    
    .codigo {
      background: var(--cor-fundo);
      padding: 0.25rem 0.5rem;
      border-radius: 12px;
      font-family: monospace;
      font-weight: 600;
    }
    
    .preco {
      color: var(--cor-urgente);
      font-weight: 600;
    }
    
    .item-categorias {
      margin-bottom: 0.5rem;
    }
    
    .categoria-tag {
      display: inline-block;
      background: var(--cor-primaria);
      color: white;
      padding: 0.25rem 0.5rem;
      border-radius: 12px;
      font-size: 0.7rem;
      margin-right: 0.5rem;
      margin-bottom: 0.25rem;
    }
    
    .item-descricao {
      color: var(--cor-texto-claro);
      font-size: 0.9rem;
      line-height: 1.5;
      margin: 0;
    }
    
    .lista-vazia {
      text-align: center;
      padding: 3rem 2rem;
      color: var(--cor-texto-claro);
    }
    
    .lista-vazia i {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: var(--cor-borda);
    }
    
    .notificacoes-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1050;
      max-width: 400px;
    }
    
    .notificacao {
      margin-bottom: 1rem;
      border-radius: 8px;
      box-shadow: var(--sombra-media);
      animation: slideIn 0.3s ease-out;
    }
    
    .notificacao-conteudo {
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      color: white;
    }
    
    .notificacao.sucesso .notificacao-conteudo {
      background: var(--cor-confianca);
    }
    
    .notificacao.erro .notificacao-conteudo {
      background: var(--cor-urgente);
    }
    
    .notificacao.info .notificacao-conteudo {
      background: #3498db;
    }
    
    .notificacao.alerta .notificacao-conteudo {
      background: var(--cor-destaque);
    }
    
    .btn-fechar-notificacao {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      padding: 0;
      margin-left: auto;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    @media (max-width: 768px) {
      .admin-container {
        padding: 1rem;
      }
      
      .admin-header {
        flex-direction: column;
        align-items: stretch;
      }
      
      .admin-acoes {
        justify-content: center;
      }
      
      .form-section {
        padding: 1.5rem;
      }
      
      .form-row {
        grid-template-columns: 1fr;
        gap: 1rem;
      }
      
      .form-buttons {
        justify-content: stretch;
      }
      
      .form-buttons .btn-custom {
        flex: 1;
      }
      
      .item-produto {
        padding: 1rem;
      }
      
      .item-info {
        margin-left: 1rem;
      }
      
      .item-header {
        flex-direction: column;
        align-items: stretch;
        gap: 0.5rem;
      }
      
      .item-acoes {
        align-self: flex-end;
      }
      
      .lista-stats {
        flex-direction: column;
        gap: 0.5rem;
      }
    }

    /* Estilo para logo da loja no admin */
    .logo-loja-admin {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 0.25rem;
      vertical-align: middle;
    }

    /* Estilos para modal de importa√ß√£o CSV */
    .import-info .alert {
      border-left: 4px solid var(--cor-primaria);
      background: rgba(0, 183, 255, 0.1);
      border-color: var(--cor-primaria);
    }

    .preview-section {
      border: 1px solid var(--cor-borda);
      border-radius: 8px;
      padding: 1rem;
      background: #f8f9fa;
      margin: 1rem 0;
    }

    .preview-section h6 {
      color: var(--cor-primaria);
      margin-bottom: 0.75rem;
      font-weight: 600;
    }

    .table-responsive {
      max-height: 300px;
      overflow-y: auto;
      border: 1px solid var(--cor-borda);
      border-radius: 6px;
    }

    .conversion-info {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--cor-borda);
    }

    .progress {
      height: 25px;
      border-radius: 12px;
      overflow: hidden;
    }

    .progress-bar {
      background: linear-gradient(45deg, var(--cor-primaria), var(--cor-secundaria));
      transition: width 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 0.9rem;
    }

    #modalImportarCSV .modal-body {
      max-height: 70vh;
      overflow-y: auto;
    }

    /* Estilos para sele√ß√£o de loja */
    .loja-selection {
      background: #f8f9fa;
      padding: 1rem;
      border-radius: 8px;
      border: 1px solid #dee2e6;
    }

    .loja-selection .form-check {
      padding: 0.5rem;
      border-radius: 5px;
      transition: background-color 0.2s;
    }

    .loja-selection .form-check:hover {
      background-color: rgba(0, 183, 255, 0.05);
    }

    .loja-selection .form-check-input:checked ~ .form-check-label {
      color: var(--cor-primaria);
      font-weight: 600;
    }

    .loja-selection #loja-outro-texto {
      transition: all 0.3s ease;
    }

    .loja-selection #loja-outro-texto:enabled {
      border-color: var(--cor-primaria);
      background-color: white;
    }

    .alert-success {
      border-left-color: #28a745 !important;
      background-color: rgba(40, 167, 69, 0.1) !important;
    }

    .alert-warning {
      border-left-color: #ffc107 !important;
      background-color: rgba(255, 193, 7, 0.1) !important;
    }

    .alert-danger {
      border-left-color: #dc3545 !important;
      background-color: rgba(220, 53, 69, 0.1) !important;
    }
  </style>
  </head>
  <body>
    <div class="admin-container">
      <!-- Header -->
      <header class="admin-header">
        <h1 class="admin-titulo">
          <i class="bi bi-gear-fill"></i>
          Painel Administrativo
        </h1>

        <div class="admin-acoes">
          <div class="busca-admin">
            <input type="text" id="busca-admin"
              placeholder="Buscar produtos...">
            <i class="bi bi-search"></i>
          </div>

          <button class="btn-custom btn-confianca"
            id="btn-novo-produto">
            <i class="bi bi-plus-lg"></i> Novo Produto
          </button>

          <button class="btn-custom btn-urgente"
            id="btn-importar-csv">
            <i class="bi bi-upload"></i> Importar CSV
          </button>

          <a href="./index.html" class="btn-custom btn-destaque">
            <i class="bi bi-house"></i> Voltar ao Site
          </a>
        </div>
      </header>

      <!-- Formul√°rio de Produto em Modal -->
      <!-- Modal -->
      <div class="modal fade" id="modalProduto" tabindex="-1"
        aria-labelledby="modalProdutoLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="modalProdutoLabel">
                <i class="bi bi-box"></i>
                <span id="modal-titulo">Novo Produto</span>
              </h5>
              <button type="button" class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form id="form-produto">
                <div class="form-row">
                  <div class="form-group">
                    <label for="codigo">
                      <i class="bi bi-hash"></i>
                      C√≥digo do Produto *
                    </label>
                    <div
                      style="display: flex; gap: 0.5rem;">
                      <input type="text" id="codigo"
                        name="codigo"
                        maxlength="20"
                        placeholder="Ex: PRD001">
                      <button type="button"
                        class="btn-codigo"
                        id="btn-gerar-codigo">
                        <i class="bi bi-shuffle"></i>
                        Gerar
                      </button>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="titulo">
                      <i class="bi bi-text-left"></i>
                      T√≠tulo *
                    </label>
                    <input type="text" id="titulo"
                      name="titulo"
                      maxlength="100"
                      placeholder="Nome do produto">
                  </div>

                  <div class="form-group">
                    <label for="loja">
                      <i class="bi bi-shop"></i>
                      Loja *
                    </label>
                    <select id="loja" name="loja">
                      <!-- Op√ß√µes ser√£o preenchidas via JavaScript -->
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="preco">
                      <i
                        class="bi bi-currency-dollar"></i>
                      Pre√ßo (R$) *
                    </label>
                    <input type="number" id="preco"
                      name="preco"
                      min="0" step="0.01"
                      placeholder="0.00">
                  </div>

                  <div class="form-group">
                    <label for="vendas">
                      <i class="bi bi-graph-up"></i>
                      Vendas
                    </label>
                    <input type="text" id="vendas"
                      name="vendas"
                      placeholder="Ex: 2.5k vendas, 150 vendas">
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group"
                    style="grid-column: 1 / -1;">
                    <label for="descricao">
                      <i class="bi bi-text-paragraph"></i>
                      Descri√ß√£o *
                    </label>
                    <textarea id="descricao"
                      name="descricao"
                      maxlength="1000"
                      placeholder="Descri√ß√£o detalhada do produto"></textarea>
                    <div class="contador-caracteres"
                      id="contador-caracteres">0
                      caracteres</div>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group"
                    style="grid-column: 1 / -1;">
                    <label for="url">
                      <i class="bi bi-link-45deg"></i>
                      URL do Produto *
                    </label>
                    <div class="input-group">
                      <input type="url" id="url" name="url"
                        class="form-control"
                        placeholder="https://exemplo.com/produto">
                      <button type="button" id="btn-extrair-imagem"
                        class="btn btn-outline-info"
                        title="Extrair imagem automaticamente">
                        <i class="bi bi-search"></i> Extrair Imagem
                      </button>
                    </div>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group"
                    style="grid-column: 1 / -1;">
                    <label for="imagem">
                      <i class="bi bi-image"></i>
                      URLs das Imagens * (separadas por
                      v√≠rgula)
                    </label>
                    <textarea id="imagem" name="imagem"
                      placeholder="https://exemplo.com/imagem1.jpg, https://exemplo.com/imagem2.jpg"></textarea>
                    <div id="preview-imagens"
                      class="preview-imagens">
                      <p>Nenhuma imagem para
                        visualizar</p>
                    </div>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group"
                    style="grid-column: 1 / -1;">
                    <label for="categorias">
                      <i class="bi bi-tags"></i>
                      Categorias * (separadas por v√≠rgula)
                    </label>
                    <input type="text" id="categorias"
                      name="categorias"
                      placeholder="eletr√¥nicos, casa, jardim">
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>
                      <i class="bi bi-toggle-on"></i>
                      Status
                    </label>
                    <div class="checkbox-group">
                      <input type="checkbox" id="ativo"
                        name="ativo"
                        checked>
                      <label for="ativo">Produto
                        ativo</label>
                    </div>
                  </div>

                  <div class="form-group">
                    <label>
                      <i class="bi bi-heart"></i>
                      Destaque
                    </label>
                    <div class="checkbox-group">
                      <input type="checkbox" id="favorito"
                        name="favorito">
                      <label for="favorito">Produto
                        favorito</label>
                    </div>
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn-custom btn-urgente"
                id="btn-excluir" style="display: none;">
                <i class="bi bi-trash"></i> Excluir Produto
              </button>

              <button type="button" class="btn-custom"
                data-bs-dismiss="modal" id="btn-cancelar">
                <i class="bi bi-x-lg"></i> Cancelar
              </button>

              <button type="submit" form="form-produto"
                class="btn-custom btn-confianca"
                id="btn-salvar">
                <i class="bi bi-plus-lg"></i> Adicionar Produto
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal Importa√ß√£o CSV -->
      <div class="modal fade" id="modalImportarCSV" tabindex="-1"
        aria-labelledby="modalImportarCSVLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="modalImportarCSVLabel">
                <i class="bi bi-upload"></i>
                Importar Produtos via CSV
              </h5>
              <button type="button" class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="import-info">
                <div class="alert alert-info mb-3">
                  <i class="bi bi-info-circle"></i>
                  <strong>Formato esperado do CSV (Afiliados):</strong>
                  <br>O arquivo deve conter as seguintes colunas:
                  <br><code>Item Id,Item Name,Price,Sales,Shop Name,Commission
                    Rate,Commission,Product Link,Offer Link</code>
                  <br><br>
                  <small class="text-muted">
                    <strong>Exemplo:</strong><br>
                    18599851034,"Colete Regata Feminino","29,70",3mil+,JE
                    Magazine,7%,"R$2,08",https://shopee.com.br/product/...,https://s.shopee.com.br/...
                  </small>
                </div>

                <div class="alert alert-success mb-3">
                  <i class="bi bi-check-circle"></i>
                  <strong>Convers√£o Autom√°tica:</strong> O sistema ir√° converter
                  automaticamente os dados do afiliado para o formato interno do
                  AchaduBom
                  <ul class="mb-0 mt-2">
                    <li><code>Item Id</code> ‚Üí <code>ITEM_{id}</code> (c√≥digo
                      √∫nico)</li>
                    <li><code>Item Name</code> ‚Üí T√≠tulo do produto</li>
                    <li><code>Price</code> ‚Üí Pre√ßo (convertido para n√∫mero)</li>
                    <li><code>Product Link</code> ‚Üí URL do produto</li>
                    <li><code>Shop Name</code> ‚Üí Loja do produto</li>
                  </ul>
                </div>

                <div class="alert alert-warning mb-3">
                  <i class="bi bi-download"></i>
                  <strong>Arquivo de exemplo:</strong>
                  <a href="exemplo-afiliado.csv" download
                    class="btn btn-sm btn-outline-primary ms-2">
                    <i class="bi bi-download"></i> Baixar CSV exemplo (formato
                    afiliado)
                  </a>
                </div>

                <!-- Sele√ß√£o da Loja -->
                <div class="mb-4">
                  <label class="form-label">
                    <i class="bi bi-shop"></i>
                    <strong>Selecionar Loja (todos os produtos importados ter√£o
                      esta loja):</strong>
                  </label>
                  <div class="loja-selection">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-check mb-2">
                          <input class="form-check-input" type="radio"
                            name="loja" id="loja-shopee" value="Shopee">
                          <label class="form-check-label" for="loja-shopee">
                            <i class="bi bi-bag-fill text-warning"></i> Shopee
                          </label>
                        </div>
                        <div class="form-check mb-2">
                          <input class="form-check-input" type="radio"
                            name="loja" id="loja-ml" value="Mercado Livre">
                          <label class="form-check-label" for="loja-ml">
                            <i class="bi bi-cart-fill text-primary"></i> Mercado
                            Livre
                          </label>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-check mb-2">
                          <input class="form-check-input" type="radio"
                            name="loja" id="loja-amazon" value="Amazon">
                          <label class="form-check-label" for="loja-amazon">
                            <i class="bi bi-box-fill text-success"></i> Amazon
                          </label>
                        </div>
                        <div class="form-check mb-2">
                          <input class="form-check-input" type="radio"
                            name="loja" id="loja-aliexpress" value="AliExpress">
                          <label class="form-check-label" for="loja-aliexpress">
                            <i class="bi bi-globe text-danger"></i> AliExpress
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="form-check mt-2">
                      <input class="form-check-input" type="radio" name="loja"
                        id="loja-outro" value="outro">
                      <label class="form-check-label" for="loja-outro">
                        <i class="bi bi-plus-circle text-info"></i> Outro:
                      </label>
                      <input type="text"
                        class="form-control form-control-sm d-inline-block ms-2"
                        id="loja-outro-texto"
                        placeholder="Digite o nome da loja"
                        style="width: 200px;" disabled>
                    </div>
                  </div>
                </div>

                <div class="mb-3">
                  <label for="arquivo-csv" class="form-label">
                    <i class="bi bi-file-earmark-spreadsheet"></i>
                    Selecionar arquivo CSV
                  </label>
                  <input type="file" class="form-control" id="arquivo-csv"
                    accept=".csv">
                </div>

                <div class="preview-section" id="preview-section"
                  style="display: none;">
                  <h6><i class="bi bi-eye"></i> Pr√©via dos dados (primeiras 5
                    linhas):</h6>
                  <div class="table-responsive">
                    <table class="table table-sm" id="preview-table">
                      <thead></thead>
                      <tbody></tbody>
                    </table>
                  </div>

                  <div class="conversion-info">
                    <h6><i class="bi bi-arrow-repeat"></i> Convers√£o
                      autom√°tica:</h6>
                    <div class="alert alert-success">
                      <i class="bi bi-check-circle"></i>
                      <strong>Convers√£o inteligente:</strong>
                      <ul class="mb-0 mt-2">
                        <li><strong>C√≥digo:</strong> √öltimos 10 caracteres do
                          link da oferta</li>
                        <li><strong>Categorias:</strong> Determinadas
                          automaticamente pelo nome do produto</li>
                        <li><strong>Pre√ßo:</strong> Convertido automaticamente
                          do formato CSV</li>
                        <li><strong>Loja:</strong> Nome original mantido do
                          CSV</li>
                      </ul>
                    </div>
                  </div>
                </div>

                <div class="progress" id="progress-bar" style="display: none;">
                  <div
                    class="progress-bar progress-bar-striped progress-bar-animated"
                    role="progressbar"
                    style="width: 0%">0%</div>
                </div>

                <div id="progress-status" class="mt-2 small text-muted"
                  style="display: none;">
                  Preparando importa√ß√£o...
                </div>

                <div id="resultado-importacao" class="mt-3"></div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn-custom"
                data-bs-dismiss="modal">
                <i class="bi bi-x-lg"></i> Cancelar
              </button>

              <button type="button" class="btn-custom btn-confianca"
                id="btn-processar-csv" disabled>
                <i class="bi bi-upload"></i> Importar Produtos
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Lista de Produtos -->
      <section class="lista-produtos">
        <div class="lista-header">
          <h2>
            <i class="bi bi-list-ul"></i>
            Produtos Cadastrados
          </h2>

          <div class="lista-stats">
            <div class="stat-item">
              <i class="bi bi-box"></i>
              <span id="total-produtos">0 produtos</span>
            </div>
            <div class="stat-item">
              <i class="bi bi-check-circle"></i>
              <span id="produtos-ativos">0 ativos</span>
            </div>
            <div class="stat-item">
              <i class="bi bi-heart"></i>
              <span id="produtos-favoritos">0 favoritos</span>
            </div>
          </div>
        </div>

        <div id="lista-produtos">
          <!-- Lista ser√° preenchida via JavaScript -->
        </div>
      </section>
    </div>

    <!-- Scripts -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./assets/js/admin-api.js"></script>

    <script>
    // Atualiza√ß√£o das estat√≠sticas
    function atualizarEstatisticas() {
      if (window.adminManager) {
        const stats = window.adminManager.getEstatisticas();
        document.getElementById('total-produtos').textContent = `${stats.total} produtos`;
        document.getElementById('produtos-ativos').textContent = `${stats.ativos} ativos`;
        document.getElementById('produtos-favoritos').textContent = `${stats.favoritos} favoritos`;
      }
    }

    // Atualizar estat√≠sticas quando os dados mudarem
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        atualizarEstatisticas();
        setInterval(atualizarEstatisticas, 5000);
      }, 1000);
    });
  </script>
  </body>
</html>
